<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CogniPilot Foundation - Issuer Profile</title>
    <meta name="description" content="CogniPilot Foundation issuer profile for OpenBadges 3.0 digital credentials.">
    <meta property="og:title" content="CogniPilot Foundation - Credential Issuer">
    <meta property="og:description" content="Official issuer profile for CogniPilot digital credentials">
    <meta property="og:type" content="profile">
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .issuer-profile {
            background: var(--color-bg-card);
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--color-border);
        }

        .issuer-banner {
            background: linear-gradient(135deg, var(--color-bg-darker) 0%, var(--color-bg-card) 100%);
            height: 160px;
            position: relative;
            border-bottom: 1px solid var(--color-border);
        }

        .issuer-avatar {
            position: absolute;
            bottom: -48px;
            left: 32px;
            width: 96px;
            height: 96px;
            background: white;
            border-radius: var(--radius-lg);
            padding: 8px;
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .issuer-avatar img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .issuer-body {
            padding: 64px 32px 32px;
        }

        .issuer-name {
            font-size: 1.75rem;
            margin-bottom: 4px;
        }

        .issuer-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin-bottom: 20px;
        }

        .issuer-meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
            color: var(--color-text-secondary);
        }

        .issuer-meta-item svg {
            width: 16px;
            height: 16px;
        }

        .issuer-meta-item a {
            color: var(--color-primary);
        }

        .issuer-bio {
            color: var(--color-text-secondary);
            margin-bottom: 24px;
            line-height: 1.8;
        }

        .issuer-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .verification-section {
            background: var(--color-bg-card);
            border-radius: var(--radius-xl);
            padding: 32px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--color-border);
        }

        .badge-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .badge-list-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--color-bg-card);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--color-border);
            transition: all 0.2s;
            color: var(--color-text);
        }

        .badge-list-item:hover {
            box-shadow: var(--shadow-md);
            border-color: var(--color-primary);
            color: var(--color-text);
        }

        .badge-list-image {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--color-bg-darker) 0%, var(--color-bg-card) 100%);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .badge-list-image img {
            max-width: 48px;
            max-height: 48px;
        }

        .badge-list-info {
            flex: 1;
        }

        .badge-list-info h4 {
            margin-bottom: 4px;
        }

        .badge-list-info p {
            color: var(--color-text-secondary);
            font-size: 0.875rem;
            margin: 0;
        }

        .badge-list-arrow {
            color: var(--color-text-muted);
        }

        .crypto-details {
            background: var(--color-bg-darker);
            border-radius: var(--radius-md);
            padding: 16px;
            border-left: 4px solid var(--color-primary);
        }

        .crypto-details h4 {
            margin-bottom: 12px;
            color: var(--color-primary);
        }

        .crypto-details ul {
            margin: 0;
            padding-left: 20px;
            color: var(--color-text-secondary);
        }

        .crypto-details li {
            margin-bottom: 6px;
        }

        .crypto-details strong {
            color: var(--color-text);
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container nav-container">
            <a href="/" class="nav-brand">
                <img src="/images/cognipilot-logo.png" alt="CogniPilot" class="nav-logo">
                <span>CogniPilot Credentials</span>
            </a>
            <div class="nav-links">
                <a href="/" class="nav-link">Home</a>
                <a href="/issuer.html" class="nav-link active">Issuer</a>
                <a href="/badges/" class="nav-link">Badges</a>
                <a href="/verify.html" class="nav-link">Verify</a>
            </div>
        </div>
    </nav>

    <main class="container" style="padding-top: 32px; padding-bottom: 48px;">
        <div class="issuer-profile">
            <div class="issuer-banner">
                <div class="issuer-avatar">
                    <img src="/images/cognipilot-logo-light.svg" alt="CogniPilot Foundation">
                </div>
            </div>
            <div class="issuer-body">
                <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                    <h1 class="issuer-name" id="issuer-name">CogniPilot Foundation</h1>
                    <span class="verified-badge">
                        <svg viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                        </svg>
                        Verified Issuer
                    </span>
                </div>

                <div class="issuer-meta">
                    <a href="https://cognipilot.org" target="_blank" class="issuer-meta-item">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"/>
                        </svg>
                        cognipilot.org
                    </a>
                    <a href="mailto:info@cognipilot.org" class="issuer-meta-item">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                        info@cognipilot.org
                    </a>
                    <a href="https://github.com/cognipilot" target="_blank" class="issuer-meta-item">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                        </svg>
                        GitHub
                    </a>
                </div>

                <p class="issuer-bio" id="issuer-description">
                    CogniPilot is an open source project for the next generation of autonomous systems. We issue verifiable digital credentials to recognize community participation, membership, and technical achievements in the field of autonomous robotics.
                </p>

                <div class="issuer-actions">
                    <a href="/verify.html" class="btn btn-primary">Verify a Credential</a>
                    <a href="/issuer.json" class="btn btn-secondary" target="_blank">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                            <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
                        </svg>
                        View JSON-LD Profile
                    </a>
                </div>
            </div>
        </div>

        <section class="section">
            <h2 class="section-title">Issued Badges</h2>
            <div class="badge-list" id="badge-list">
                <!-- Badges loaded dynamically -->
            </div>
        </section>

        <section class="section">
            <div class="verification-section">
                <h2 style="margin-bottom: 8px;">Verification Key</h2>
                <p style="color: var(--color-text-secondary); margin-bottom: 24px;">
                    All credentials issued by CogniPilot Foundation are signed using Ed25519 digital signatures. Use this public key to verify credential authenticity.
                </p>

                <div style="margin-bottom: 16px;">
                    <div class="key-label">Public Key (Multibase)</div>
                    <div class="key-display" id="public-key">z6Mkp7ErHCMw7ofrmXRnc17RuppRRJnAdAkdACwFUmxmeRVS</div>
                </div>

                <div style="margin-bottom: 24px;">
                    <div class="key-label">Key ID</div>
                    <div class="key-display" id="key-id">https://credentials.cognipilot.org/issuer.json#key-1</div>
                </div>

                <div class="crypto-details">
                    <h4>Cryptographic Details</h4>
                    <ul>
                        <li><strong>Algorithm:</strong> Ed25519</li>
                        <li><strong>Cryptosuite:</strong> eddsa-rdfc-2022</li>
                        <li><strong>Key Type:</strong> Multikey</li>
                        <li><strong>Canonicalization:</strong> RDFC-1.0 (RDF Dataset Canonicalization)</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <img src="/images/cognipilot-logo.png" alt="CogniPilot" class="footer-logo">
                    <span>CogniPilot Foundation</span>
                </div>
                <div class="footer-links">
                    <a href="https://cognipilot.org" target="_blank">Website</a>
                    <a href="https://github.com/cognipilot" target="_blank">GitHub</a>
                    <a href="mailto:info@cognipilot.org">Contact</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 CogniPilot Foundation. Credentials issued under OpenBadges 3.0.</p>
            </div>
        </div>
    </footer>

    <script>
        async function loadIssuerData() {
            try {
                const response = await fetch('/issuer.json');
                if (response.ok) {
                    const issuer = await response.json();
                    document.getElementById('issuer-name').textContent = issuer.name || 'CogniPilot Foundation';
                    document.getElementById('issuer-description').textContent = issuer.description || '';

                    if (issuer.verificationMethod && issuer.verificationMethod[0]) {
                        const key = issuer.verificationMethod[0];
                        document.getElementById('public-key').textContent = key.publicKeyMultibase || '';
                        document.getElementById('key-id').textContent = key.id || '';
                    }
                }
            } catch (e) {
                console.error('Failed to load issuer data:', e);
            }
        }

        async function loadBadges() {
            const badgeList = document.getElementById('badge-list');
            const badges = [
                // Leadership
                'board-of-directors-2026',
                'tsc-member-2026',
                // Project Roles
                'maintainer-cognipilot',
                'maintainer-rumoca',
                'collaborator-cognipilot',
                'contributor-cognipilot',
                // Supporters
                'gold-member-2026',
                'silver-member-2026',
                'bronze-member-2026'
            ];

            for (const badgeId of badges) {
                try {
                    const response = await fetch(`/achievements/${badgeId}.json`);
                    if (response.ok) {
                        const badge = await response.json();
                        badgeList.appendChild(createBadgeListItem(badge, badgeId));
                    }
                } catch (e) {
                    console.error(`Failed to load badge: ${badgeId}`, e);
                }
            }

            if (badgeList.children.length === 0) {
                badgeList.innerHTML = '<p style="text-align: center; color: var(--color-text-muted);">No badges available yet.</p>';
            }
        }

        function createBadgeListItem(badge, badgeId) {
            const item = document.createElement('a');
            item.href = `/badges/badge.html?id=${badgeId}`;
            item.className = 'badge-list-item';

            const imageUrl = badge.image?.id || badge.image || '/images/default-badge.svg';

            item.innerHTML = `
                <div class="badge-list-image">
                    <img src="${imageUrl.replace('https://credentials.cognipilot.org', '')}" alt="${badge.name}" onerror="this.src='/images/default-badge.svg'">
                </div>
                <div class="badge-list-info">
                    <h4>${badge.name}</h4>
                    <p>${badge.description}</p>
                </div>
                <div class="badge-list-arrow">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </div>
            `;

            return item;
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadIssuerData();
            loadBadges();
        });
    </script>
</body>
</html>
